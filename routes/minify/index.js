var express=require("express"),userp=require("./user.js"),router=express.Router();router.get("/",function(e,o){o.render("index",{title:"User Profile"})}),router.get("/index",function(e,o){o.render("index",{title:"User Profile"})}),router.get("/registration",function(e,o){o.render("registration",{title:"Here you can register Your Self"})}),router.get("/updateProfile",function(e,o){o.render("updateProfile",{title:"Here you can register Your Self"})}),router.get("/user",function(e,o){var s=e.session,r=s.userID;console.log("*****session.userID;-1********* "+r);var t=userp.getUserProfile(r.toString());console.log("*****UserProfile.userID;-1*********"+JSON.stringify(t)),o.render("user",{userID:r,userFName:t.firstName,userLName:t.lastName})}),router.post("/loginsubmit",function(e,o){console.log("We are here so form is submited"+JSON.stringify(e.body));var s=e.body.loginid,r=e.session,t=(e.body.password,userp.getUser(s));if(t){r.userID=s,console.log("success with logon ID"+JSON.stringify(t)),o.contentType("application/json"),o.setHeader("Content-Type","application/json");var n=[{Status:!0,data:"user"}];console.log("Responce object length"+n.length),o.end(JSON.stringify(n))}else{console.log("success with logon ID"+JSON.stringify(t)),o.contentType("application/json"),o.setHeader("Content-Type","application/json");var n=[{Status:!1,data:" "}];console.log("Responce object length"+n.length),o.end(JSON.stringify(n))}}),router.post("/registrationsubmit",function(e,o){console.log(e.headers["content-type"]),console.log("We are here in registrationsubmit form is submited"+JSON.stringify(e.body));var s={loginid:e.body.loginid,hashpassword:e.body.password,firstName:e.body.firstname,lastName:e.body.lastname,emailID:e.body.emailid,mobileNumber:e.body.mobile};console.log("WuserProfile object before adding data"+JSON.stringify(s));var r=userp.addUser(s);if(o.contentType("application/json"),r){console.log("New photo added"),console.log(e.body.files),console.log("WuserProfile object after adding data");var t=e.session;t.userID=e.body.loginid;var n=[{Status:!0}];console.log("Responce object length"+n.length),o.end(JSON.stringify(n))}else{console.log("WuserProfile object fail to  adding data");var n=[{Status:!1}];console.log("Responce object length"+n.length),o.end(JSON.stringify(n))}}),router.post("/imageUpload",function(e,o){console.log(e.headers["content-type"]),console.log("We are here in imageupad form is submited"+JSON.stringify(e.body)),console.log("New photo added"),console.log(e.files.file.name);var s=e.session,r=s.userID;console.log("*****session.userID;-1********* "+r);var t=userp.getUserProfile(r.toString());t.imagePath=e.files.file.name,console.log("*****UserProfile.userID;-2*********"+JSON.stringify(t));userp.updateUserProfile(t);if(o.contentType("application/json"),upload_success){console.log("WuserProfile object after adding data");var n=[{Status:!0}];console.log("Responce object length"+n.length),o.end(JSON.stringify(n))}else{console.log("WuserProfile object fail to  adding data");var n=[{Status:!1}];console.log("Responce object length"+n.length),o.end(JSON.stringify(n))}}),router.get("/getProfileData",function(e,o){var s=e.session,r=s.userID;console.log("*****session.userID;-1********* "+r);var t=userp.getUserProfile(r.toString());console.log("*****UserProfile.userID;-2*********"+JSON.stringify(t)),o.contentType("application/json"),o.end(JSON.stringify(t))}),router.post("/updateProfleSubmit",function(e,o){{var s=e.session;s.userID}console.log("*****UserProfile.userID;-2*********"+JSON.stringify(e.body));var r=(userp.updateUserProfile(e.body),"user");o.header("Content-Length",r.length),o.end(r)}),module.exports=router;